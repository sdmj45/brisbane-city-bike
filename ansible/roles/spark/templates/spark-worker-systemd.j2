[Unit]
Description=Spark Worker Service
Wants=network.target network-online.target
After=network.target network-online.target

[Service]
Type=forking
User=spark
WorkingDirectory={{ spark.working_dir }}
#ExecStart={{ spark_var.install_dir }}/spark-{{ spark_var.version }}-bin-hadoop{{ spark_var.hadoop_version }}/bin/spark-class org.apache.spark.deploy.worker.Worker spark://{{ groups["spark-masters"] | join(":{0},".format(spark_var.master_work_port)) }}:{{ spark_var.master_work_port }} --webui-port {{ spark.worker_ui_port }} --work-dir {{ spark.working_dir }}
ExecStart={{ spark_var.install_dir }}/spark-{{ spark_var.version }}-bin-hadoop{{ spark_var.hadoop_version }}/sbin/start-slave.sh spark://{{ groups["spark-masters"] | join(":{0},".format(spark_var.master_work_port)) }}:{{ spark_var.master_work_port }}
ExecStop={{ spark_var.install_dir }}/spark-{{ spark_var.version }}-bin-hadoop{{ spark_var.hadoop_version }}/sbin/stop-slave.sh
Restart=on-abort

[Install]
WantedBy=multi-user.target

